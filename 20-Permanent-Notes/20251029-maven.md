---
id: 202510292
created: 2025-10-29
updated: 2025-10-29
tags: [permanent, java, maven, build-tool, concept]
type: permanent-note
status: draft
confidence: high
source_type: knowledge
---

# Apache Maven: Javaプロジェクト管理の基礎

## Mavenとは？
Apache Mavenは、Javaプロジェクトの**ビルドプロセスを自動化**し、**依存関係を管理**するための強力なツールです。「設定より規約（Convention over Configuration）」という思想に基づいており、標準的なディレクトリ構造やビルド手順に従うことで、煩雑な設定作業を大幅に削減します。

## なぜMavenを使うのか？
- **依存関係の自動管理**: `pom.xml`に必要なライブラリを記述するだけで、Mavenが自動的にダウンロードし、クラスパスに追加してくれます。手動でのJARファイル管理は不要になります。
- **標準化されたビルドプロセス**: `mvn package`のような簡単なコマンド一つで、誰が実行しても同じ手順でコンパイル、テスト、パッケージングが行われます。
- **プロジェクト情報の一元管理**: プロジェクトのバージョン、ライブラリ、プラグインなどの情報が`pom.xml`に集約されます。
- **豊富なプラグイン**: テストレポートの生成、コードカバレッジの計測、アプリケーションのデプロイなど、多種多様なプラグインで機能を拡張できます。

## コアコンセプト

### 1. POM (Project Object Model)
`pom.xml`ファイルはMavenプロジェクトの心臓部です。プロジェクトに関するすべての設定情報（依存関係、プラグイン、ビルド手順など）がXML形式で記述されています。

### 2. Maven座標 (Coordinates)
Mavenは、世界中のライブラリ（成果物、Artifact）を一意に識別するために「座標」という概念を用います。
| 要素 | 意味 | 例 |
| :--- | :--- | :--- |
| **groupId** | プロジェクトを作成した組織やグループのID。通常は逆ドメイン名形式。 | `org.springframework.boot` |
| **artifactId** | プロジェクト（成果物）固有の名前。 | `spring-boot-starter-web` |
| **version** | プロジェクトのバージョン番号。 | `3.3.5` |

### 3. 依存関係 (Dependencies)
プロジェクトが必要とする外部ライブラリのことです。`pom.xml`の`<dependencies>`セクションに座標を記述します。

```xml
<dependencies>
  <dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.10.1</version>
  </dependency>
</dependencies>
```

### 4. リポジトリ (Repository)
ライブラリ（JARファイルなど）が保管されている場所です。
- **ローカルリポジトリ**: 自身のPC内（通常は `~/.m2/repository`）にあり、一度ダウンロードしたライブラリがキャッシュされます。
- **セントラルリポジトリ**: Mavenコミュニティが管理する巨大な公開リポジトリ。デフォルトで参照されます。
- **リモートリポジトリ**: 企業内や特定のプロジェクトで利用されるプライベートなリポジトリ。

### 5. ビルドライフサイクルとフェーズ
Mavenには`default`, `clean`, `site`という3つの主要なビルドライフサイクルがあります。各ライフサイクルは、順序付けられた**フェーズ**で構成されています。
- **`clean`**: ビルド成果物（`target`ディレクトリ）を削除する。
- **`default`**: プロジェクトのビルドとデプロイを行う。主要なフェーズは以下の通りです。
    1. `validate`: プロジェクトが正しいか検証する。
    2. `compile`: ソースコードをコンパイルする。
    3. `test`: コンパイルされたコードをテストする。
    4. `package`: コードをJARやWARなどの形式にパッケージングする。
    5. `verify`: パッケージが有効かチェックする。
    6. `install`: パッケージをローカルリポジトリにインストールする。
    7. `deploy`: パッケージをリモートリポジトリにデプロイする。
- **`site`**: プロジェクトのドキュメントサイトを生成する。

コマンドでフェーズを指定すると、そのフェーズに至るまでのすべてのフェーズが順番に実行されます。例えば、`mvn package`を実行すると、`validate`, `compile`, `test`が順に実行された後、`package`が実行されます。

## 標準的なディレクトリ構造
Mavenは以下のディレクトリ構造を規約として定めています。
```
my-app/
├── pom.xml                    # プロジェクト設定ファイル
└── src
    ├── main
    │   ├── java/              # Javaソースコード
    │   └── resources/         # 設定ファイルなどのリソース
    └── test
        ├── java/              # テストコード
        └── resources/         # テスト用リソース
```

## よく使うMavenコマンド
- `mvn clean`: `target`ディレクトリを削除し、ビルド成果物をクリーンアップします。
- `mvn compile`: `src/main/java`のソースコードをコンパイルし、`target/classes`に配置します。
- `mvn test`: `mvn compile`を実行後、`src/test/java`のテストコードを実行します。
- `mvn package`: `mvn test`を実行後、プロジェクトをJARやWARファイルにパッケージングし、`target`ディレクトリに配置します。
- `mvn install`: `mvn package`を実行後、生成されたパッケージをローカルリポジトリ（`~/.m2/repository`）にインストールします。これにより、他のローカルプロジェクトから依存関係として参照できるようになります。
- `mvn clean install`: 最もよく使われるコマンドの一つ。クリーンアップからローカルリポジトリへのインストールまでを一貫して行います。